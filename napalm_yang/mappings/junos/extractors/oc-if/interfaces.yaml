---
metadata:
    prefix: "oc-if"
    parser: XMLExtractor
    execute:
        config:
            - method: _get_config_xml
              args:
                  filter_xml: "<configuration><interfaces></interfaces></configuration>"
                  options:
                      source: running

interfaces:
    interface:
        _list_extraction:
            mode: xpath
            xpath: "interfaces/interface"
            key: name
            from: interfaces.0
        name:
            _leaf_extraction:
                mode: key
                value: interface_key
        hold_time:
            config:
                down:
                    _leaf_extraction:
                        mode: not_implemented
                up:
                    _leaf_extraction:
                        mode: not_implemented
        config:
            name:
                _leaf_extraction:
                    mode: key
                    value: interface_key
            type_:
                _leaf_extraction:
                    mode: map
                    xpath: name
                    regexp: "(?P<value>[a-z]+).*"
                    from: "interface.{interface_key}"
                    map:
                        ge: napalm_yang.ianaift.Ethernetcsmacd
                        lo: napalm_yang.ianaift.Softwareloopback
                        ae: napalm_yang.ianaift.Ieee8023Adlag
            enabled:
                _leaf_extraction:
                    mode: is_absent
                    xpath: "disable"
                    from: "interface.{interface_key}"
                    type: boolean
            description:
                _leaf_extraction:
                    mode: xpath
                    xpath: description
                    type: py23_compat.text_type
                    from: "interface.{interface_key}"
                    default: ""
            mtu:
                _leaf_extraction:
                    mode: xpath
                    xpath: mtu
                    from: "interface.{interface_key}"
                    type: int
                    default: null
        subinterfaces:
            subinterface:
                _list_extraction:
                    mode: xpath
                    xpath: "unit"
                    key: name
                    from: "interface.{interface_key}"
                index:
                    _leaf_extraction:
                        mode: not_implemented
                config:
                    index:
                        _leaf_extraction:
                            mode: not_implemented
                    name:
                        _leaf_extraction:
                            mode: key
                            value: subinterface_key
                    enabled:
                        _leaf_extraction:
                            mode: is_absent
                            xpath: "disable"
                            from: "subinterface.{subinterface_key}"
                            type: boolean
                    description:
                        _leaf_extraction:
                            mode: xpath
                            xpath: description
                            type: py23_compat.text_type
                            from: "subinterface.{subinterface_key}"
                            default: ""
