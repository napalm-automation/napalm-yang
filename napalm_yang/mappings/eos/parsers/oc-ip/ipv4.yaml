---
metadata:
    prefix: "oc-ip"
    parser: TextExtractor
    execute:
        config: {}

ipv4:
    config:
        enabled:
            _leaf_extraction:
                mode: is_absent
                regexp: "(?P<value>^\\W*switchport$)"
                from: parent
                type: boolean
        mtu:
            _leaf_extraction:
                mode: not_implemented
    addresses:
        address:
            _list_extraction:
                mode: block
                regexp: "(?P<block>ip address (?P<key>(?P<ip>.*))\\/(?P<prefix>\\d+))(?P<secondary> secondary)*"
                from: parent
            ip:
                _leaf_extraction:
                    mode: extra_vars
                    var: "address.ip"
            config:
                ip:
                    _leaf_extraction:
                        mode: extra_vars
                        var: "address.ip"
                prefix_length:
                    _leaf_extraction:
                        mode: extra_vars
                        var: "address.prefix"
            vrrp:
                vrrp_group:
                    _list_extraction:
                        mode: not_implemented
                    virtual_router_id:
                    config:
                        virtual_address:
                            _leaf_extraction:
                                mode: not_implemented
                        priority:
                            _leaf_extraction:
                                mode: not_implemented
                        preempt:
                            _leaf_extraction:
                                mode: not_implemented
                        advertisement_interval:
                            _leaf_extraction:
                                mode: not_implemented
                        virtual_router_id:
                            _leaf_extraction:
                                mode: not_implemented
                        preempt_delay:
                            _leaf_extraction:
                                mode: not_implemented
                        accept_mode:
                            _leaf_extraction:
                                mode: not_implemented
    neighbors:
        neighbor:
            _list_extraction:
                mode: not_implemented
            _block_capture: "(?P<block>interface (?P<key>(Ethernet|Port-Channel|Vlan)\\d+)\n(?:.|\n)*?^!$)"
            ip:
                _search: "napalm: not implemented"
                _type: int
                _default: 0
            config:
                ip:
                    _search: "napalm: not implemented"
                    _type: int
                    _default: 0
                link_layer_address:
                    _search: "napalm: not implemented"
                    _type: int
                    _default: 0

