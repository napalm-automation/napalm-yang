---
metadata:
    processor: JSONParser
    execute:
        - method: _oc_platform

components:
    _process: unnecessary
    component:
        _process:
            - mode: dict
              from: "{{ bookmarks.components.0.components.component|json }}"
        config:
            _process: not_implemented
            name:
                _process: not_implemented
        name:
            _process: not_implemented
        properties:
            _process: unnecessary
            property:
                _process:
                    - mode: dict
                      from: "{{ bookmarks.parent.get('properties', {}).get('property', {})|json }}"
                config:
                    _process: not_implemented
                    name:
                        _process: not_implemented
                    value:
                        _process: not_implemented
                name:
                    _process: not_implemented
                state:
                    _process: unnecessary
                    configurable:
                        _process: not_implemented
                    name:
                        _process:
                            - mode: value
                              value: "{{ parent_key }}"
                    value:
                        _process:
                            - mode: value
                              value: "{{ bookmarks.parent.state.value }}"
        state:
            _process: unnecessary
            description:
                _process:
                    - mode: value
                      value: "{{ bookmarks.parent.state.description|default() }}"
                      when: "{{ bookmarks.parent.state.description|default('None') is not equalto 'None' }}"
            id:
                _process: not_implemented
            mfg-name:
                _process: 
                    - mode: value
                      value: "{{ bookmarks.parent.state.get('mfg-name', None) }}"
                      when: "{{ bookmarks.parent.state.get('mfg-name', 'None') is not equalto 'None' }}"
            name:
                _process:
                    - mode: value
                      value: "{{ parent_key }}"
            part-no:
                _process:
                    - mode: value
                      value: "{{ bookmarks.parent.state.get('part-no', None) }}"
                      when: "{{ bookmarks.parent.state.get('part-no', 'None') is not equalto 'None' }}"
            serial-no:
                _process:
                    - mode: value
                      value: "{{ bookmarks.parent.state.get('serial-no', None) }}"
                      when: "{{ bookmarks.parent.state.get('serial-no', 'None') is not equalto 'None' }}"
            temperature:
                _process: unnecessary
                avg:
                    _process: not_implemented
                instant:
                    _process:
                        - mode: value
                          value: "{{ bookmarks.parent.state.get('temperature', {}).get('instant', None) }}"
                          when: "{{ bookmarks.parent.state.get('temperature', {}).get('instant', 'None') is not equalto 'None' }}"
                max:
                    _process:
                        - mode: value
                          value: "{{ bookmarks.parent.state.get('temperature', {}).get('max', None) }}"
                          when: "{{ bookmarks.parent.state.get('temperature', {}).get('max', 'None') is not equalto 'None' }}"
                min:
                    _process: not_implemented
            type:
                _process:
                    - mode: value
                      value: "{{ bookmarks.parent.state.get('type', None) }}"
                      when: "{{ bookmarks.parent.state.get('type', 'None') is not equalto 'None' }}"
            version:
                _process:
                    - mode: value
                      value: "{{ bookmarks.parent.state.get('version', None) }}"
                      when: "{{ bookmarks.parent.state.get('version', 'None') is not equalto 'None' }}"
        subcomponents:
            _process: unnecessary
            subcomponent:
                _process:
                    - mode: dict
                      from:  "{{ bookmarks.parent.get('subcomponents', {}).get('subcomponent', {})|json }}"
                config:
                    _process: not_implemented
                    name:
                        _process: not_implemented
                name:
                    _process: not_implemented
                state:
                    _process: unnecessary
                    name:
                        _process:
                            - mode: value
                              value: "{{ parent_key }}"

